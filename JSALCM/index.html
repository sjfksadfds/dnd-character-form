<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="color-scheme" content="light dark" />
  <title>D&D 캐릭터 입력</title>
  <link rel="stylesheet" href="assets/css/style.css" />
</head>
<body>
  <div class="wrap">
    <header class="header">
      <div class="title-row">
        <h1>📝 D&D 캐릭터 기본 정보 입력</h1>
        <div class="theme-controls">
          <button id="themeToggle" class="theme-toggle" type="button" aria-pressed="false" aria-label="테마 전환 (라이트/다크)" title="테마 전환">
            <span class="icon" aria-hidden="true">🌙</span>
            <span class="label">다크</span>
          </button>
        </div>
      </div>
      <p>클래스, 종족, 배경, 성향을 입력하면 <strong>저장 없이 실시간</strong>으로 미리보기가 갱신됩니다.</p>
    </header>

    <section class="card form-card" aria-labelledby="form-title">
      <h2 id="form-title" class="sr-only">캐릭터 입력 폼</h2>
      <form id="char-form" novalidate>
        <div class="field">
          <label for="name">캐릭터 이름<span class="req" aria-hidden="true">*</span></label>
          <input
            id="name" name="name" type="text" inputmode="text" autocomplete="nickname"
            placeholder="예: 아렌(Arlen) / 강소율"
            minlength="1" maxlength="40" required
            aria-describedby="name-hint name-error" aria-invalid="false"
          />
          <p id="name-hint" class="hint">한글/영문, 공백, 하이픈(-), 언더바(_), 작은따옴표('), 마침표(.) 허용. (최대 40자)</p>
          <p id="name-error" class="error-message" hidden></p>
        </div>

        <div class="grid-2">
          <div class="field">
            <label for="cls">클래스(Class)<span class="req" aria-hidden="true">*</span></label>
            <select id="cls" name="class" required aria-describedby="cls-error" aria-invalid="false">
              <option value="" selected disabled>— 클래스를 선택 —</option>
              <!-- 옵션은 JS(options.ko.global.js)로 주입됨 -->
            </select>
            <p id="cls-error" class="error-message" hidden></p>
          </div>

          <div class="field">
            <label for="alignment">성향(Alignment)<span class="req" aria-hidden="true">*</span></label>
            <select id="alignment" name="alignment" required aria-describedby="alignment-error" aria-invalid="false">
              <option value="" selected disabled>— 성향을 선택 —</option>
              <!-- 옵션은 JS(options.ko.global.js)로 주입됨 -->
            </select>
            <p id="alignment-error" class="error-message" hidden></p>
          </div>
        </div>

        <div class="grid-2">
          <div class="field">
            <label for="species">종족(Species)<span class="req" aria-hidden="true">*</span></label>
            <select id="species" name="species" required aria-describedby="species-error" aria-invalid="false">
              <option value="" selected disabled>— 종족을 선택 —</option>
              <!-- 옵션은 JS(options.ko.global.js)로 주입됨 -->
            </select>
            <p id="species-error" class="error-message" hidden></p>
          </div>

          <div class="field">
            <label for="background">배경(Background)<span class="req" aria-hidden="true">*</span></label>
            <select id="background" name="background" required aria-describedby="background-error" aria-invalid="false">
              <option value="" selected disabled>— 배경을 선택 —</option>
              <!-- 옵션은 JS(options.ko.global.js)로 주입됨 -->
            </select>
            <p id="background-error" class="error-message" hidden></p>
          </div>
        </div>

        <div class="actions">
          <!-- 저장 버튼 제거. 초기화만 유지 -->
          <button type="button" class="secondary" id="btnReset">초기화</button>
        </div>
      </form>
    </section>

    <section id="preview" class="card preview-card" aria-live="polite" hidden>
      <div class="preview-header">
        <h3 class="name" id="pv-name">—</h3>
        <div class="chips">
          <span class="tag" id="pv-class" title="클래스">Class: —</span>
          <span class="tag" id="pv-alignment" title="성향">Alignment: —</span>
          <span class="tag" id="pv-species" title="종족">Species: —</span>
          <span class="tag" id="pv-background" title="배경">Background: —</span>
        </div>
      </div>
      <div id="pv-features-wrap" class="features" hidden>
        <h4 class="subheading">클래스 레벨 1 특성</h4>
        <ul id="pv-class-features" class="feature-list"></ul>
      </div>
      <p class="muted" style="margin:12px 0 0;">이 미리보기는 저장 없이 브라우저 메모리에서만 보입니다.</p>
    </section>

    <footer>
      <p><strong>팁:</strong> 입력/선택 즉시 미리보기에 반영됩니다. <kbd>Ctrl</kbd>+<kbd>Z</kbd>로 되돌리기, <kbd>Esc</kbd>로 콤보박스 닫기.</p>
    </footer>
  </div>

  <noscript>
    이 페이지는 미리보기 및 테마 전환에 JavaScript가 필요합니다. JS가 꺼져 있어도 입력/선택은 가능합니다.
  </noscript>

  <!-- 옵션 데이터(목록 + 레벨1 특성) 먼저 로드 -->
  <script src="assets/js/options.ko.global.js" defer></script>
  <!-- 앱 로직 -->
  <script src="assets/js/app.js" defer></script>
</body>
</html>
